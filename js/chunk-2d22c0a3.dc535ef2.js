(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c0a3"],{f212:function(e,t,o){"use strict";o.r(t);o("a4d3"),o("e01a");var a=o("7a23"),c={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb",class:"mb-3"},r={class:"breadcrumb"},d=Object(a["createVNode"])("li",{class:"breadcrumb-item"},"商品",-1),l={class:"breadcrumb-item"},n=Object(a["createTextVNode"])("全部商品"),s={key:0,class:"breadcrumb-item"},i={key:1,class:"breadcrumb-item active"},b={key:2,class:"breadcrumb-item active"},u={key:0,class:"d-flex justify-content-between mb-4"},p=Object(a["createTextVNode"])("返回"),m={class:"d-flex"},f={key:1,class:"d-flex justify-content-end mb-3"},O=Object(a["createVNode"])("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[Object(a["createVNode"])("li",{class:"nav-item",role:"presentation"},[Object(a["createVNode"])("button",{class:"nav-link active",id:"info-tab",type:"button",role:"tab","data-bs-toggle":"tab","data-bs-target":"#info","aria-controls":"info","aria-selected":"true"}," 商品資訊 ")]),Object(a["createVNode"])("li",{class:"nav-item",role:"presentation"},[Object(a["createVNode"])("button",{class:"nav-link",id:"content-tab",type:"button",role:"tab","data-bs-toggle":"tab","data-bs-target":"#content","aria-controls":"content","aria-selected":"false"}," 商品內容 ")]),Object(a["createVNode"])("li",{class:"nav-item",role:"presentation"},[Object(a["createVNode"])("button",{class:"nav-link",id:"images-tab",type:"button",role:"tab","data-bs-toggle":"tab","data-bs-target":"#images","aria-controls":"images","aria-selected":"false"}," 商品圖片 ")])],-1),j={class:"tab-content border-bottom p-4",id:"myTabContent"},V={class:"tab-pane fade show active",id:"info",role:"tabpanel","aria-labelledby":"info-tab"},N={class:"row"},h={class:"col-md-6"},v={class:"mb-3"},y=Object(a["createVNode"])("label",{for:"productTitle",class:"form-label"},[Object(a["createTextVNode"])("商品名稱"),Object(a["createVNode"])("sup",null,"*")],-1),g={class:"mb-3"},I=Object(a["createVNode"])("label",{for:"productDescription",class:"form-label"},[Object(a["createTextVNode"])("商品描述"),Object(a["createVNode"])("sup",null,"*")],-1),x={class:"col-md-6"},k={class:"row"},C={class:"col-md-6 mb-3"},w=Object(a["createVNode"])("label",{for:"productOriPrice",class:"form-label"},[Object(a["createTextVNode"])("原價"),Object(a["createVNode"])("sup",null,"*")],-1),B={class:"col-md-6 mb-3"},S=Object(a["createVNode"])("label",{for:"productPrice",class:"form-label"},[Object(a["createTextVNode"])("售價"),Object(a["createVNode"])("sup",null,"*")],-1),_={class:"col-md-6 mb-3"},E=Object(a["createVNode"])("label",{for:"productUnit",class:"form-label"},[Object(a["createTextVNode"])("單位"),Object(a["createVNode"])("sup",null,"*")],-1),T={class:"col-md-6 mb-3"},U={class:"d-flex mt-5"},P={class:"form-check mb-3 me-4"},L=Object(a["createVNode"])("label",{class:"form-check-label",for:"seasonProduct"}," 季節限定 ",-1),$={class:"form-check mb-3"},q=Object(a["createVNode"])("label",{class:"form-check-label",for:"sellProduct"}," 限時特惠 ",-1),D={class:"tab-pane fade",id:"content",role:"tabpanel","aria-labelledby":"profile-tab"},M={class:"row"},R={class:"col-md-6"},F={class:"mb-3"},J=Object(a["createVNode"])("label",{for:"productMainContent",class:"form-label"},[Object(a["createTextVNode"])(" 主要內容"),Object(a["createVNode"])("sup",null,"*")],-1),z={class:"mb-3"},A=Object(a["createVNode"])("label",{for:"productSubContent",class:"form-label"},[Object(a["createTextVNode"])(" 說明內容"),Object(a["createVNode"])("sup",null,"*")],-1),G={class:"mb-3"},H=Object(a["createVNode"])("label",{for:"productExplanation ",class:"form-label"},[Object(a["createTextVNode"])(" 補充內容"),Object(a["createVNode"])("sup",null,"*")],-1),K={class:"col-md-6"},Q={class:"mb-3"},W=Object(a["createVNode"])("label",{for:"productSpec",class:"form-label"},[Object(a["createTextVNode"])(" 商品規格"),Object(a["createVNode"])("sup",null,"*")],-1),X={class:"mb-3"},Y=Object(a["createVNode"])("label",{for:"productPrecautions",class:"form-label"},"注意事項",-1),Z={class:"tab-pane fade",id:"images",role:"tabpanel","aria-labelledby":"images-tab"},ee={class:"row"},te=Object(a["createVNode"])("div",{class:"loadingio-spinner-dual-ball-haac1tizt7t"},[Object(a["createVNode"])("div",{class:"ldio-u3364un719"},[Object(a["createVNode"])("div"),Object(a["createVNode"])("div"),Object(a["createVNode"])("div")])],-1);function oe(e,t,o,oe,ae,ce){var re=Object(a["resolveComponent"])("router-link"),de=Object(a["resolveComponent"])("Field"),le=Object(a["resolveComponent"])("error-message"),ne=Object(a["resolveComponent"])("CategorySelect"),se=Object(a["resolveComponent"])("IsEnabledSelect"),ie=Object(a["resolveComponent"])("Form"),be=Object(a["resolveComponent"])("ImagesInput"),ue=Object(a["resolveComponent"])("Loading");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("nav",c,[Object(a["createVNode"])("ol",r,[d,Object(a["createVNode"])("li",l,[Object(a["createVNode"])(re,{to:"/admin/products"},{default:Object(a["withCtx"])((function(){return[n]})),_:1})]),"edit"==ae.readonly?(Object(a["openBlock"])(),Object(a["createBlock"])("li",s,Object(a["toDisplayString"])(ae.productInfo.title),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("li",i,Object(a["toDisplayString"])(ae.productInfo.title),1)),ae.readonly?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("li",b,"編輯"))])]),ae.readonly?(Object(a["openBlock"])(),Object(a["createBlock"])("div",u,[Object(a["createVNode"])(re,{to:"/admin/products",class:"btn btn-primary btn-sm"},{default:Object(a["withCtx"])((function(){return[p]})),_:1}),Object(a["createVNode"])("div",m,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary btn-sm me-3",onClick:t[1]||(t[1]=function(e){return ce.delProduct()})}," 刪除 "),Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[2]||(t[2]=function(e){return ce.pushReadStatus(!1)})}," 編輯 ")])])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",f,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary btn-sm me-3",onClick:t[3]||(t[3]=function(){return ce.cancelEdit&&ce.cancelEdit.apply(ce,arguments)})}," 取消 "),Object(a["createVNode"])("button",{class:"btn btn-primary btn-sm",onClick:t[4]||(t[4]=function(e){return ce.update()})},"確定")])),O,Object(a["createVNode"])("div",j,[Object(a["createVNode"])("div",V,[Object(a["createVNode"])(ie,{onSubmit:ce.checkBasicInfo},{default:Object(a["withCtx"])((function(e){var o=e.errors;return[Object(a["createVNode"])("div",N,[Object(a["createVNode"])("div",h,[Object(a["createVNode"])("div",v,[y,Object(a["createVNode"])(de,{type:"text",class:["form-control disabled",{"is-invalid":o["商品名稱"]}],id:"productTitle",placeholder:"請輸入商品標題",modelValue:ae.productInfo.title,"onUpdate:modelValue":t[5]||(t[5]=function(e){return ae.productInfo.title=e}),name:"商品名稱",rules:"required",disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"商品名稱",class:"invalid-feedback"})]),Object(a["createVNode"])("div",g,[I,Object(a["createVNode"])(de,{type:"text",class:["form-control",{"is-invalid":o["商品描述"]}],id:"productDescription",placeholder:"請輸入商品描述",modelValue:ae.productInfo.description,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ae.productInfo.description=e}),name:"商品描述",rules:"required",as:"textarea",style:{height:"210px"},disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"商品描述",class:"invalid-feedback"})])]),Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",k,[Object(a["createVNode"])(ne,{readonly:ae.readonly,"edit-main":ae.productInfo.category,"edit-sub":ae.productInfo.sub_category,onEmitCategory:ce.getCategory},null,8,["readonly","edit-main","edit-sub","onEmitCategory"]),Object(a["createVNode"])("div",C,[w,Object(a["createVNode"])(de,{type:"number",class:["form-control",{"is-invalid":o["商品原價"]}],id:"productOriPrice",placeholder:"請輸入商品原價",modelValue:ae.productInfo.origin_price,"onUpdate:modelValue":t[7]||(t[7]=function(e){return ae.productInfo.origin_price=e}),modelModifiers:{number:!0},name:"商品原價",rules:"min_value:1|required",min:"1",disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"商品原價",class:"invalid-feedback"})]),Object(a["createVNode"])("div",B,[S,Object(a["createVNode"])(de,{type:"number",class:["form-control",{"is-invalid":o["商品售價"]}],id:"productPrice",placeholder:"請輸入商品售價",modelValue:ae.productInfo.price,"onUpdate:modelValue":t[8]||(t[8]=function(e){return ae.productInfo.price=e}),modelModifiers:{number:!0},name:"商品售價",rules:"min_value:1|required",min:"1",disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"商品售價",class:"invalid-feedback"})]),Object(a["createVNode"])("div",_,[E,Object(a["createVNode"])(de,{type:"text",class:["form-control",{"is-invalid":o["商品單位"]}],id:"productUnit",placeholder:"請輸入商品單位",modelValue:ae.productInfo.unit,"onUpdate:modelValue":t[9]||(t[9]=function(e){return ae.productInfo.unit=e}),name:"商品單位",rules:"required",disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"商品單位",class:"invalid-feedback"})]),Object(a["createVNode"])("div",T,[Object(a["createVNode"])("div",U,[Object(a["createVNode"])("div",P,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input me-2",type:"checkbox",value:"",id:"seasonProduct",disabled:ae.readonly,"onUpdate:modelValue":t[10]||(t[10]=function(e){return ae.productInfo.is_season=e})},null,8,["disabled"]),[[a["vModelCheckbox"],ae.productInfo.is_season]]),L]),Object(a["createVNode"])("div",$,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input me-2",type:"checkbox",value:"",id:"sellProduct",disabled:ae.readonly,"onUpdate:modelValue":t[11]||(t[11]=function(e){return ae.productInfo.is_sell=e})},null,8,["disabled"]),[[a["vModelCheckbox"],ae.productInfo.is_sell]]),q])])]),Object(a["createVNode"])(se,{readonly:ae.readonly,"edit-sell":ae.productInfo.is_enabled,"edit-time":ae.productInfo.sell_time,onEmitIsEnabled:ce.getIsEnabled},null,8,["readonly","edit-sell","edit-time","onEmitIsEnabled"])])])])]})),_:1},8,["onSubmit"])]),Object(a["createVNode"])("div",D,[Object(a["createVNode"])(ie,{onSubmit:ce.checkBasicInfo},{default:Object(a["withCtx"])((function(e){var o=e.errors;return[Object(a["createVNode"])("div",M,[Object(a["createVNode"])("div",R,[Object(a["createVNode"])("div",F,[J,Object(a["createVNode"])(de,{type:"text",class:["form-control",{"is-invalid":o["主要內容"]}],id:"productMainContent",placeholder:"請輸入主要內容",modelValue:ae.productInfo.main_content,"onUpdate:modelValue":t[12]||(t[12]=function(e){return ae.productInfo.main_content=e}),name:"主要內容",rules:"required",as:"textarea",style:{height:"160px"},disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"主要內容",class:"invalid-feedback"})]),Object(a["createVNode"])("div",z,[A,Object(a["createVNode"])(de,{type:"text",class:["form-control",{"is-invalid":o["說明內容"]}],id:"productSubContent",placeholder:"請輸入說明內容",modelValue:ae.productInfo.sub_content,"onUpdate:modelValue":t[13]||(t[13]=function(e){return ae.productInfo.sub_content=e}),name:"說明內容",rules:"required",as:"textarea",style:{height:"160px"},disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"說明內容",class:"invalid-feedback"})]),Object(a["createVNode"])("div",G,[H,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{type:"text",class:"form-control",id:"productExplanation ",placeholder:"請輸入補充內容","onUpdate:modelValue":t[14]||(t[14]=function(e){return ae.productInfo.explanation=e}),name:"補充內容",style:{height:"160px"},disabled:ae.readonly},"\n              ",8,["disabled"]),[[a["vModelText"],ae.productInfo.explanation]])])]),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("div",Q,[W,Object(a["createVNode"])(de,{type:"text",class:["form-control",{"is-invalid":o["商品規格"]}],id:"productSpec",placeholder:"請輸入商品規格",modelValue:ae.productInfo.spec,"onUpdate:modelValue":t[15]||(t[15]=function(e){return ae.productInfo.spec=e}),name:"商品規格",rules:"required",as:"textarea",style:{height:"160px"},disabled:ae.readonly},null,8,["modelValue","class","disabled"]),Object(a["createVNode"])(le,{name:"商品規格",class:"invalid-feedback"})]),Object(a["createVNode"])("div",X,[Y,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{"onUpdate:modelValue":t[16]||(t[16]=function(e){return ae.productInfo.precautions=e}),class:"form-control",id:"productPrecautions",style:{height:"160px"},placeholder:"請輸入注意事項",disabled:ae.readonly},"\n              ",8,["disabled"]),[[a["vModelText"],ae.productInfo.precautions]])])])])]})),_:1},8,["onSubmit"])]),Object(a["createVNode"])("div",Z,[Object(a["createVNode"])("div",ee,[Object(a["createVNode"])(be,{"product-images":ae.productInfo.imagesUrl,readonly:ae.readonly,onEmitImages:ce.getImages},null,8,["product-images","readonly","onEmitImages"])])])]),Object(a["createVNode"])(ue,{active:ae.isLoading},{default:Object(a["withCtx"])((function(){return[te]})),_:1},8,["active"])],64)}o("99af"),o("4e82");var ae=o("df18"),ce=o("0ef8"),re=o("5f50"),de={data:function(){return{routeId:this.$route.params.id,productInfo:{},readonly:!1,isLoading:!1}},components:{CategorySelect:ae["a"],IsEnabledSelect:ce["a"],ImagesInput:re["a"]},methods:{getProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yiren","/product/").concat(this.routeId);this.$http.get(t).then((function(t){t.data.success?(e.productInfo=t.data.product,e.isLoading=!1):(e.isLoading=!1,e.$swal({text:t.data.message,icon:"error"}))})).catch((function(){e.$swal({text:"Opps ... 發生錯誤，請嘗試重新整理此頁面",icon:"error"})}))},cancelEdit:function(){this.isLoading=!0,this.pushReadStatus(!0),this.getProduct()},update:function(){var e=this;this.pushReadStatus(!0),this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yiren","/admin/product/").concat(this.routeId);this.$http.put(t,{data:this.productInfo}).then((function(t){t.data.success?(e.isLoading=!1,e.$swal({text:t.data.message,icon:"success",confirmButtonColor:"#ffbc1f"})):(e.isLoading=!1,e.$swal({text:t.data.message,icon:"error",confirmButtonColor:"#ffbc1f"}))})).catch((function(){e.isLoading=!1,e.$swal({text:"Opps ... 發生錯誤，請嘗試重新整理此頁面",icon:"error",confirmButtonColor:"#ffbc1f"})}))},delProduct:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yiren","/admin/product/").concat(this.routeId);this.$http.delete(t).then((function(t){t.data.success?(e.isLoading=!1,e.$swal({text:t.data.message,icon:"success",confirmButtonColor:"#ffbc1f"}),e.$router.push("/admin/products")):(e.isLoading=!1,e.$swal({text:t.data.message,icon:"error",confirmButtonColor:"#ffbc1f"}))})).catch((function(){e.$swal({text:"Opps ... 發生錯誤，請嘗試重新整理此頁面",icon:"error",confirmButtonColor:"#ffbc1f"})}))},getCategory:function(e){this.productInfo.categorySort=e},getIsEnabled:function(e,t){this.productInfo.is_enabled=e,this.productInfo.sell_time=t},getImages:function(e){this.productInfo.imagesUrl=e,this.productInfo.imagesUrl.sort((function(e,t){return e.imgId-t.imgId}))},checkBasicInfo:function(){this.$swal({text:"儲存成功",icon:"success",confirmButtonColor:"#ffbc1f"})},pushReadStatus:function(e){this.readonly=e,sessionStorage.setItem("readOnly",e)}},mounted:function(){this.isLoading=!0,this.getProduct(),this.readonly=JSON.parse(sessionStorage.getItem("readOnly"))}};de.render=oe;t["default"]=de}}]);
//# sourceMappingURL=chunk-2d22c0a3.dc535ef2.js.map